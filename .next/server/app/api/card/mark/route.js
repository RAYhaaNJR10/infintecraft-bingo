"use strict";(()=>{var e={};e.id=11,e.ids=[11],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},9523:e=>{e.exports=require("dns")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5158:e=>{e.exports=require("http2")},1808:e=>{e.exports=require("net")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},7282:e=>{e.exports=require("process")},2781:e=>{e.exports=require("stream")},4404:e=>{e.exports=require("tls")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},9796:e=>{e.exports=require("zlib")},184:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>x,originalPathname:()=>y,patchFetch:()=>g,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>h});var a={};r.r(a),r.d(a,{POST:()=>c,dynamic:()=>p});var o=r(5419),i=r(9108),n=r(9678),s=r(8070),u=r(3956);let p="force-dynamic";async function c(e){try{let{teamId:t,cellId:r}=await e.json(),a=await (0,u.VP)(t);if(!a)return s.Z.json({error:"Team not found"},{status:404});if(!a.startTime)return s.Z.json({error:"Game not started for this team"},{status:400});let o=a.card.find(e=>e.id===r);if(o){o.completed?(o.completed=!1,delete o.completedAt):(o.completed=!0,o.completedAt=Date.now());let e=a.card.every(e=>e.completed);return e&&!a.completedAt?(a.completedAt=Date.now(),a.endTime=Date.now()):!e&&a.completedAt&&(delete a.completedAt,delete a.endTime),await (0,u.Bl)(a),s.Z.json({success:!0,card:a.card,completed:!!a.completedAt})}return s.Z.json({error:"Cell not found"},{status:404})}catch(e){return console.error("Card mark error:",e),s.Z.json({error:"Internal Server Error"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/card/mark/route",pathname:"/api/card/mark",filename:"route",bundlePath:"app/api/card/mark/route"},resolvedPagePath:"C:\\Users\\hp\\Desktop\\enigma club event\\app\\api\\card\\mark\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:f,headerHooks:x,staticGenerationBailout:h}=d,y="/api/card/mark/route";function g(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}},3956:(e,t,r)=>{let a,o;r.d(t,{Sy:()=>f,ky:()=>h,VP:()=>l,LK:()=>d,iN:()=>y,Bl:()=>m});var i=r(2774),n=r(7010);r(9728);let s={apiKey:"AIzaSyBQcd69cXJYILY26UCQChhJ_0W-BGNVVfQ",authDomain:"infinitecraft-bingo.firebaseapp.com",projectId:"infinitecraft-bingo",storageBucket:"infinitecraft-bingo.firebasestorage.app",messagingSenderId:"389113005458",appId:"1:389113005458:web:1a3319857d968eb36fed4b"};function u(){return o||(o=(0,i.ad)((a||(a=(0,n.C6)().length?(0,n.Mq)():(0,n.ZF)(s)),a))),o}let p=()=>(0,i.hJ)(u(),"teams"),c=()=>(0,i.JU)(u(),"gameState","config");async function d(){return(await (0,i.PL)(p())).docs.map(e=>e.data())}async function l(e){let t=await (0,i.QT)((0,i.JU)(u(),"teams",e));return t.exists()?t.data():null}async function m(e){let t=JSON.parse(JSON.stringify(e));await (0,i.pl)((0,i.JU)(u(),"teams",e.id),t)}async function f(e){await (0,i.oe)((0,i.JU)(u(),"teams",e))}let x={duration:72e4,isStarted:!1,startTime:null};async function h(){let e=await (0,i.QT)(c());return e.exists()?e.data():(await (0,i.pl)(c(),x),x)}async function y(e){let t=JSON.parse(JSON.stringify(e));await (0,i.pl)(c(),t)}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,177],()=>r(184));module.exports=a})();